(this.webpackJsonpvisquant=this.webpackJsonpvisquant||[]).push([[0],{218:function(t,e,n){},359:function(t,e,n){},360:function(t,e,n){"use strict";n.r(e);var c=n(7),r=(n(218),n(93)),a=n(94),s=n(107),i=n(106),o={PENDING:"pending",REJECTED:"rejected",RESOLVED:"resolved"},u=n(369),l=n(368),h=n(0),j=n.n(h),d=n(48),f=function(){return Object(c.jsx)(u.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited doesn't exist.",extra:Object(c.jsx)(d.b,{to:"/",children:Object(c.jsx)(l.a,{type:"default",children:"Back Home"})})})},p=function(){return Object(c.jsx)(u.a,{status:"500",title:"Blip in the network",subTitle:"Something went wrong. Please try again later.",extra:Object(c.jsx)(l.a,{type:"default",onClick:function(){return location.reload()},children:"Refresh"},"home")})},b=n(366),x=n(163),O=n.n(x),m=function(t){Object(s.a)(n,t);var e=Object(i.a)(n);function n(t){var c;return Object(r.a)(this,n),(c=e.call(this,t)).state={httpResponseCode:null,status:o.PENDING,content:null},c}return Object(a.a)(n,[{key:"componentDidMount",value:function(){this.fetchContent()}},{key:"componentDidUpdate",value:function(t){t.href!==this.props.href&&this.setState({href:this.props.href,status:o.PENDING},this.fetchContent)}},{key:"fetchContent",value:function(){var t=this;fetch(this.props.href).then((function(e){return t.setState({httpResponseCode:e.status}),e.text()})).then((function(e){t.setState({status:o.RESOLVED,content:e})})).catch((function(){t.setState({status:o.REJECTED,content:null})}))}},{key:"render",value:function(){switch(this.state.status){case o.PENDING:return Object(c.jsx)(b.a,{active:!0});case o.RESOLVED:return this.state.httpResponseCode,Object(c.jsx)(O.a,{source:this.state.content});case o.REJECTED:return Object(c.jsx)(p,{})}}}]),n}(j.a.Component),g=function(t){var e=t.match.params.subpage,n="how-to".concat(e?"-"+e:"",".md"),r="https://raw.githubusercontent.com/ChildrensMedicalResearchInstitute/ptm-visquant/master/docs/".concat(n);return Object(c.jsx)(m,{href:r})},y=n(81),v=n(375),C=n(370),E=function(){return Object(c.jsx)(C.a,{message:"Under construction",description:Object(c.jsxs)("p",{children:["This new PTM Visquant app is under construction and currently lacks some of the existing features in the current prototype. Please check out"," ",Object(c.jsx)("a",{href:"https://visquant.cmri.org.au/",children:"visquant.cmri.org.au"})," if this app is currently missing the feature you need."]}),type:"warning",icon:Object(c.jsx)(v.a,{}),showIcon:!0})},k=n(105),w=10,D="grey",I=30,R=20,S=5,P=.9,T=20,N=.5,q=function(t){var e=j.a.createRef();return j.a.useEffect((function(){var n=k.b(e.current);(function(e){e.append("rect").attr("x",0).attr("y",I-w/2).attr("height",w).attr("width",t.scale(t.graphics.length)).attr("fill",D)})(n),function(e){e.selectAll("region").data(t.graphics.regions.filter((function(t){return!1!==t.display}))).enter().append("g").append("rect").attr("rx",S).attr("ry",S).attr("x",(function(e){return t.scale(e.start)})).attr("y",I-R/2).attr("width",(function(e){return t.scale(e.end-e.start)})).attr("height",R).style("fill",(function(t){return t.colour})).style("fill-opacity",P).style("stroke","black")}(n),function(e){e.selectAll("motif").data(t.graphics.motifs.filter((function(t){return!1!==t.display}))).enter().append("rect").attr("x",(function(e){return t.scale(e.start)})).attr("y",(function(){return I-T/2})).attr("width",(function(e){return t.scale(e.end-e.start)})).attr("height",T).style("fill",(function(t){return t.colour})).style("fill-opacity",N)}(n)}),[]),Object(c.jsx)("svg",{ref:e})},F=n(362),L=o.PENDING,M=o.RESOLVED,V=o.REJECTED,J=function(t){var e=j.a.useState(null),n=Object(y.a)(e,2),r=n[0],a=n[1],s=j.a.useState(L),i=Object(y.a)(s,2),o=i[0],u=i[1];return j.a.useEffect((function(){return e=t.id,void fetch("http://pfam.xfam.org/protein/".concat(e,"/graphic")).then((function(t){return t.json()})).then((function(t){console.assert(1===t.length,{data:t,error:"Unexpected response from Pfam"}),a(t[0]),u(M)})).catch((function(){a(null),u(V)}));var e}),[t.id]),Object(c.jsx)("div",{style:{margin:"20px 0",overflow:"visible"},children:function(){switch(o){case L:return Object(c.jsx)(F.a,{style:{display:"flex",justifyContent:"center"}});case M:return Object(c.jsx)(q,{graphics:r,scale:t.scale});case V:return Object(c.jsx)(C.a,{message:'Could not find protein "'.concat(t.id,'"'),type:"error",showIcon:!0})}}()})},G=n(365),A=function(t){return Object(c.jsx)(G.a,{mode:"tags",style:{width:"100%"},onChange:t.onChange,allowClear:!0,autoFocus:!0,tokenSeparators:[","],placeholder:"Protein entry name or accession",defaultValue:t.defaultValue})},H=n(73),B=n(364),K=n(129),U=n.n(K),_=n(16),z=[0,4e3],Q=[0,2e3],W=Object(_.f)((function(t){var e,n=null!==(e=U.a.parse(t.location.search,{ignoreQueryPrefix:!0}).id)&&void 0!==e?e:[],r=j.a.useState(n),a=Object(y.a)(r,2),s=a[0],i=a[1],o=k.a().domain(z).range(Q);function u(e){t.history.push({search:"?"+U.a.stringify({id:e})}),i(e)}return Object(h.useEffect)((function(){return u(s)}),[]),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(E,{}),Object(c.jsxs)(B.a,{style:{margin:"20px 0"},children:[Object(c.jsx)(A,{onChange:u,defaultValue:s}),0===s.length?Object(c.jsx)(H.a,{style:{margin:"40px"},description:Object(c.jsxs)("p",{children:["To get started, enter Pfam protein entry name or accession.",Object(c.jsx)("br",{}),"For example, TAU_RAT or P19332."]})}):s.map((function(t){return Object(c.jsx)(J,{id:t,scale:o},t)}))]})]})})),X=n(95),Y=n(373),Z=n(372),$=n(371),tt=n(374),et=n(363),nt=n(367),ct=et.a.Header,rt="menu-key-draw",at="menu-key-help",st="menu-key-license",it="menu-key-github",ot=function(t){Object(s.a)(n,t);var e=Object(i.a)(n);function n(t){var c;return Object(r.a)(this,n),(c=e.call(this,t)).state={selectedKeys:[]},c.handleClick=c.handleClick.bind(Object(X.a)(c)),c}return Object(a.a)(n,[{key:"handleClick",value:function(t){console.log(t),t.key!==it&&this.setState({selectedKeys:[t.key]})}},{key:"render",value:function(){return Object(c.jsx)(ct,{children:Object(c.jsxs)(nt.a,{theme:"dark",onClick:this.handleClick,selectedKeys:this.state.selectedKeys,mode:"horizontal",children:[Object(c.jsx)(nt.a.Item,{icon:Object(c.jsx)(Y.a,{}),children:Object(c.jsx)(d.c,{to:"/",children:"Draw"})},rt),Object(c.jsx)(nt.a.Item,{icon:Object(c.jsx)(Z.a,{}),children:Object(c.jsx)(d.c,{to:"/how-to",children:"Help"})},at),Object(c.jsx)(nt.a.Item,{icon:Object(c.jsx)($.a,{}),children:Object(c.jsx)(d.c,{to:"/license",children:"License"})},st),Object(c.jsx)(nt.a.Item,{icon:Object(c.jsx)(tt.a,{}),children:Object(c.jsx)("a",{href:"https://github.com/ChildrensMedicalResearchInstitute/ptm-visquant",target:"_blank",rel:"noopener noreferrer",children:"GitHub"})},it)]})})}}]),n}(j.a.Component),ut=et.a.Content,lt=et.a.Footer,ht=function(){return Object(c.jsxs)(et.a,{className:"layout",style:{minHeight:"100vh"},children:[Object(c.jsx)(ot,{}),Object(c.jsx)(ut,{style:{margin:"50px"},children:Object(c.jsxs)(_.c,{children:[Object(c.jsx)(_.a,{path:"/",exact:!0,component:W}),Object(c.jsx)(_.a,{path:"/how-to/:subpage?",component:g}),Object(c.jsx)(_.a,{path:"/license",exact:!0,component:function(){return Object(c.jsx)(m,{href:"https://raw.githubusercontent.com/ChildrensMedicalResearchInstitute/ptm-visquant/master/LICENSE.md"})}}),Object(c.jsx)(_.a,{component:f})]})}),Object(c.jsx)(lt,{style:{textAlign:"center"},children:Object(c.jsxs)("p",{children:["Made with \u2661 by"," ",Object(c.jsx)("a",{href:"https://github.com/digitalpoetry",target:"_blank",rel:"noopener noreferrer",children:"Jonathan Du"}),". Copyright \xa9 2019 Children\u2019s Medical Research Institute."]})})]})};var jt=function(){return Object(c.jsx)(d.a,{basename:"/",children:Object(c.jsx)(ht,{})})},dt=(n(359),function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,376)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,a=e.getLCP,s=e.getTTFB;n(t),c(t),r(t),a(t),s(t)}))}),ft=n(32);n.n(ft).a.render(Object(c.jsx)(j.a.StrictMode,{children:Object(c.jsx)(jt,{})}),document.getElementById("root")),dt()}},[[360,1,2]]]);
//# sourceMappingURL=main.6240efb2.chunk.js.map